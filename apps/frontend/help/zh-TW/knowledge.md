# 問答功能說明

## 概述

問答功能讓您可以管理 Chatbot 的知識庫，包括建立、編輯、分類和批量上傳問答內容。系統提供三個主要功能區塊：問答列表、分類管理和批量上傳。

## 功能區塊

### 1. 問答列表

問答列表是管理所有問答內容的主要區域，提供完整的 CRUD 功能。

#### 基本操作

- **新增問答**：點擊右上角「+ 新增」按鈕，開啟問答編輯器
- **編輯問答**：點擊問答項目右側的「編輯」按鈕
- **刪除問答**：點擊問答項目右側的「刪除」按鈕，系統會要求確認
- **查看詳情**：點擊問答項目可查看完整內容

#### 搜尋與篩選

- **搜尋功能**：在搜尋框輸入關鍵字，可搜尋問題或答案內容
- **分類篩選**：使用分類下拉選單，選擇特定分類或「未分類」
- **狀態篩選**：使用統計按鈕快速篩選
  - **問題**：顯示所有問答
  - **啟用**：只顯示啟用狀態的問答
  - **停用**：只顯示停用狀態的問答
  - **未分類**：只顯示未分類的問答

#### 批量操作

選擇多個問答後，可以進行批量操作：

- **批量設定分類**：為選中的問答設定分類
- **批量啟用**：將選中的問答設為啟用狀態
- **批量停用**：將選中的問答設為停用狀態
- **批量刪除**：刪除選中的所有問答

**使用方式：**
1. 勾選問答項目左側的核取方塊
2. 選擇多個問答後，上方會顯示批量操作工具列
3. 選擇要執行的操作
4. 系統會要求確認後執行

#### 問答編輯器

問答編輯器支援以下欄位：

**必填欄位**
- **問題**：問答的問題標題
- **答案**：問答的答案內容（支援 Markdown 格式）

**選填欄位**
- **同義詞**：輸入多個同義詞，用逗號分隔（例如：FAQ, 常見問題, 問與答）
- **分類**：選擇問答所屬的分類
- **狀態**：設定問答為「啟用」或「停用」

**Markdown 支援**
- 答案欄位支援 Markdown 格式
- 可以使用標題、列表、粗體、斜體、連結等格式
- 支援圖片上傳（JPG, PNG, GIF, WEBP，最大 5MB）

---

### 2. 分類管理

分類管理讓您可以建立階層式的分類結構，方便組織和管理問答內容。

#### 基本操作

- **新增分類**：點擊右上角「+ 新增分類」按鈕
- **編輯分類**：點擊分類項目右側的「編輯」按鈕
- **刪除分類**：點擊分類項目右側的「刪除」按鈕
  - 如果分類下有問答，系統會提示無法刪除
  - 如果分類下有子分類，需要先刪除子分類

#### 階層結構

- **父分類**：可以建立頂層分類
- **子分類**：可以為分類建立子分類，形成多層階層結構
- **展開/收起**：點擊分類項目可以展開或收起子分類

#### 排序功能

- **上移/下移**：使用分類項目右側的上下箭頭按鈕調整順序
- 排序會影響問答列表中的分類顯示順序

#### 分類表單

建立或編輯分類時，可以設定：

- **分類名稱**：必填，分類的顯示名稱
- **父分類**：選擇此分類的上層分類（可選）
- **描述**：分類的說明文字（可選）

---

### 3. 批量上傳

批量上傳功能讓您可以透過 CSV 或 XLSX 檔案一次匯入多筆問答內容。

#### 支援格式

- **CSV**：逗號分隔值檔案
- **XLSX**：Excel 2007+ 格式

#### 使用步驟

1. **選擇檔案**
   - 點擊「選擇檔案」或拖曳檔案到上傳區域
   - 系統會自動解析檔案內容

2. **欄位對應**
   - 系統會自動偵測欄位名稱
   - 手動對應欄位到系統欄位：
     - **問題**（必填）：對應到問題欄位
     - **答案**（必填）：對應到答案欄位
     - **同義詞**（選填）：對應到同義詞欄位
     - **分類名稱**（選填）：對應到分類欄位
   - 不需要的欄位可以選擇「忽略此欄位」

3. **資料預覽**
   - 檢查解析後的資料是否正確
   - 查看驗證錯誤（如有）
   - 修正錯誤後重新上傳

4. **執行上傳**
   - 點擊「上傳」按鈕開始批量上傳
   - 系統會顯示上傳進度和結果

#### 欄位對應規則

系統會自動識別以下欄位名稱（不區分大小寫）：

**問題欄位**
- question, 問題, 問, q, q:

**答案欄位**
- answer, 答案, 回答, ans, a, a:, 答案：, 回答：

**同義詞欄位**
- synonym, 同義詞, 別名, 同義問法, synonyms, 別名：, 同義詞：, 標籤, tag, tags, 標籤：

**分類欄位**
- topic_name, topic, 分類, category, 類別

#### 資料驗證

上傳前系統會進行以下驗證：

- **必填欄位檢查**：問題和答案必須填寫
- **資料格式檢查**：確保資料格式正確
- **分類檢查**：如果指定分類名稱，系統會自動建立不存在的分類

#### 上傳結果

上傳完成後會顯示：

- **成功數量**：成功新增的問答數量
- **跳過數量**：因為重複或其他原因跳過的數量
- **失敗數量**：上傳失敗的問答數量
- **詳細資訊**：可以查看每個問答的上傳狀態

---

## 使用技巧

### 問答管理

1. **使用分類組織問答**：建議先建立分類結構，再將問答歸類到對應分類
2. **善用同義詞**：為問答設定同義詞，可以提升 AI 搜尋的準確度
3. **定期檢查停用問答**：停用過時或錯誤的問答，避免誤導用戶
4. **使用 Markdown 格式化答案**：讓答案內容更易讀，支援圖片和連結

### 分類管理

1. **建立階層結構**：使用父子分類建立清晰的知識結構
2. **合理命名**：使用清楚、簡潔的分類名稱
3. **定期整理**：刪除不需要的分類，保持分類結構簡潔

### 批量上傳

1. **準備資料**：確保 CSV/XLSX 檔案格式正確，欄位名稱清楚
2. **先預覽再上傳**：上傳前先檢查資料預覽，確認欄位對應正確
3. **分批上傳**：如果資料量很大，建議分批上傳，避免單次上傳過多資料
4. **檢查結果**：上傳後檢查失敗項目，修正後重新上傳

---

## 常見問題

### Q: 如何刪除有問答的分類？
A: 需要先將分類下的問答移動到其他分類或設為未分類，才能刪除分類。

### Q: 批量上傳時，如果分類不存在會怎樣？
A: 系統會自動建立不存在的分類。如果分類名稱對應到多個欄位，會使用第一個對應的欄位值。

### Q: 問答的「命中次數」是什麼？
A: 命中次數記錄該問答被用戶查詢到的次數，可以用來了解哪些問答最常被使用。

### Q: 支援哪些圖片格式？
A: 支援 JPG, JPEG, PNG, GIF, WEBP 格式，單檔最大 5MB。

### Q: 如何讓問答在 Chatbot 中顯示？
A: 問答必須設為「啟用」狀態，才會在 Chatbot 中顯示。停用的問答不會出現在搜尋結果中。

### Q: 批量上傳失敗怎麼辦？
A: 檢查上傳結果中的錯誤訊息，修正資料後重新上傳。常見錯誤包括：
- 必填欄位缺失
- 資料格式錯誤
- 檔案格式不支援

---
